# REAL KERNEL-LEVEL ANTI-RANSOMWARE MAKEFILE
# Requires Windows Driver Kit (WDK) and Visual Studio

# Driver information
DRIVER_NAME = AntiRansomwareKernel
TARGET_TYPE = DRIVER
TARGET_NAME = $(DRIVER_NAME).sys

# Source files
SOURCES = real_kernel_driver.c

# Include paths
INCLUDES = $(DDK_INC_PATH)

# Target operating systems
_NT_TARGET_VERSION = $(_NT_TARGET_VERSION_WIN10)
KMDF_VERSION_MAJOR = 1
KMDF_VERSION_MINOR = 15

# Build flags
MSC_WARNING_LEVEL = /W4 /WX
C_DEFINES = $(C_DEFINES) -DDRIVER_NAME=L\"$(DRIVER_NAME)\"

# Libraries to link
TARGETLIBS = \
    $(DDK_LIB_PATH)\ntoskrnl.lib \
    $(DDK_LIB_PATH)\hal.lib \
    $(DDK_LIB_PATH)\fltmgr.lib

# Build rules
!IF 0
To build this driver:

1. Install Windows Driver Kit (WDK) 10
2. Open "x64 Native Tools Command Prompt for VS 2019"
3. Navigate to this directory
4. Run: msbuild driver.vcxproj /p:Configuration=Release /p:Platform=x64

Or use the traditional build method:
1. Open Windows Driver Kit build environment
2. Navigate to this directory  
3. Run: build -ceZ

The resulting .sys file will be in the output directory.

IMPORTANT: Driver must be signed for Windows 10/11:
- Use test signing for development: bcdedit /set testsigning on
- For production: Get proper code signing certificate
!ENDIF
